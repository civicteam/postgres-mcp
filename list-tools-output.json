{
  "tools": [
    {
      "name": "list_schemas",
      "description": "List all schemas in the database",
      "inputSchema": {
        "properties": {},
        "title": "list_schemasArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "schemas": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Schemas",
            "type": "array"
          }
        },
        "required": [
          "schemas"
        ],
        "title": "ListSchemasResult",
        "type": "object"
      },
      "annotations": {
        "title": "List Schemas",
        "readOnlyHint": true
      }
    },
    {
      "name": "list_objects",
      "description": "List objects in a schema",
      "inputSchema": {
        "properties": {
          "schema_name": {
            "description": "Schema name",
            "title": "Schema Name",
            "type": "string"
          },
          "object_type": {
            "default": "table",
            "description": "Object type: 'table', 'view', 'sequence', or 'extension'",
            "title": "Object Type",
            "type": "string"
          }
        },
        "required": [
          "schema_name"
        ],
        "title": "list_objectsArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "objects": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Objects",
            "type": "array"
          }
        },
        "required": [
          "objects"
        ],
        "title": "ListObjectsResult",
        "type": "object"
      },
      "annotations": {
        "title": "List Objects",
        "readOnlyHint": true
      }
    },
    {
      "name": "get_object_details",
      "description": "Show detailed information about a database object",
      "inputSchema": {
        "properties": {
          "schema_name": {
            "description": "Schema name",
            "title": "Schema Name",
            "type": "string"
          },
          "object_name": {
            "description": "Object name",
            "title": "Object Name",
            "type": "string"
          },
          "object_type": {
            "default": "table",
            "description": "Object type: 'table', 'view', 'sequence', or 'extension'",
            "title": "Object Type",
            "type": "string"
          }
        },
        "required": [
          "schema_name",
          "object_name"
        ],
        "title": "get_object_detailsArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "basic": {
            "additionalProperties": true,
            "default": null,
            "title": "Basic",
            "type": "object"
          },
          "columns": {
            "default": null,
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Columns",
            "type": "array"
          },
          "constraints": {
            "default": null,
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Constraints",
            "type": "array"
          },
          "indexes": {
            "default": null,
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Indexes",
            "type": "array"
          },
          "schema": {
            "default": null,
            "title": "Schema",
            "type": "string"
          },
          "name": {
            "default": null,
            "title": "Name",
            "type": "string"
          },
          "data_type": {
            "default": null,
            "title": "Data Type",
            "type": "string"
          },
          "start_value": {
            "default": null,
            "title": "Start Value",
            "type": "string"
          },
          "increment": {
            "default": null,
            "title": "Increment",
            "type": "string"
          },
          "version": {
            "default": null,
            "title": "Version",
            "type": "string"
          },
          "relocatable": {
            "default": null,
            "title": "Relocatable",
            "type": "boolean"
          }
        },
        "title": "ObjectDetailsResult",
        "type": "object"
      },
      "annotations": {
        "title": "Get Object Details",
        "readOnlyHint": true
      }
    },
    {
      "name": "explain_query",
      "description": "Explains the execution plan for a SQL query, showing how the database will execute it and provides detailed cost estimates.",
      "inputSchema": {
        "properties": {
          "sql": {
            "description": "SQL query to explain",
            "title": "Sql",
            "type": "string"
          },
          "analyze": {
            "default": false,
            "description": "When True, actually runs the query to show real execution statistics instead of estimates. Takes longer but provides more accurate information.",
            "title": "Analyze",
            "type": "boolean"
          },
          "hypothetical_indexes": {
            "default": [],
            "description": "A list of hypothetical indexes to simulate. Each index must be a dictionary with these keys:\n    - 'table': The table name to add the index to (e.g., 'users')\n    - 'columns': List of column names to include in the index (e.g., ['email'] or ['last_name', 'first_name'])\n    - 'using': Optional index method (default: 'btree', other options include 'hash', 'gist', etc.)\n\nExamples: [\n    {\"table\": \"users\", \"columns\": [\"email\"], \"using\": \"btree\"},\n    {\"table\": \"orders\", \"columns\": [\"user_id\", \"created_at\"]}\n]\nIf there is no hypothetical index, you can pass an empty list.",
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Hypothetical Indexes",
            "type": "array"
          }
        },
        "required": [
          "sql"
        ],
        "title": "explain_queryArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "result": {
            "title": "Result",
            "type": "string"
          }
        },
        "required": [
          "result"
        ],
        "title": "explain_queryOutput",
        "type": "object"
      },
      "annotations": {
        "title": "Explain Query",
        "readOnlyHint": true
      }
    },
    {
      "name": "analyze_workload_indexes",
      "description": "Analyze frequently executed queries in the database and recommend optimal indexes",
      "inputSchema": {
        "properties": {
          "max_index_size_mb": {
            "default": 10000,
            "description": "Max index size in MB",
            "title": "Max Index Size Mb",
            "type": "integer"
          },
          "method": {
            "default": "dta",
            "description": "Method to use for analysis",
            "enum": [
              "dta",
              "llm"
            ],
            "title": "Method",
            "type": "string"
          }
        },
        "title": "analyze_workload_indexesArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "error": {
            "default": null,
            "title": "Error",
            "type": "string"
          },
          "summary": {
            "additionalProperties": true,
            "default": null,
            "title": "Summary",
            "type": "object"
          },
          "recommendations": {
            "default": null,
            "title": "Recommendations"
          },
          "query_impact": {
            "default": null,
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Query Impact",
            "type": "array"
          }
        },
        "title": "IndexAnalysisResult",
        "type": "object"
      },
      "annotations": {
        "title": "Analyze Workload Indexes",
        "readOnlyHint": true
      }
    },
    {
      "name": "analyze_query_indexes",
      "description": "Analyze a list of (up to 10) SQL queries and recommend optimal indexes",
      "inputSchema": {
        "properties": {
          "queries": {
            "description": "List of Query strings to analyze",
            "items": {
              "type": "string"
            },
            "title": "Queries",
            "type": "array"
          },
          "max_index_size_mb": {
            "default": 10000,
            "description": "Max index size in MB",
            "title": "Max Index Size Mb",
            "type": "integer"
          },
          "method": {
            "default": "dta",
            "description": "Method to use for analysis",
            "enum": [
              "dta",
              "llm"
            ],
            "title": "Method",
            "type": "string"
          }
        },
        "required": [
          "queries"
        ],
        "title": "analyze_query_indexesArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "error": {
            "default": null,
            "title": "Error",
            "type": "string"
          },
          "summary": {
            "additionalProperties": true,
            "default": null,
            "title": "Summary",
            "type": "object"
          },
          "recommendations": {
            "default": null,
            "title": "Recommendations"
          },
          "query_impact": {
            "default": null,
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Query Impact",
            "type": "array"
          }
        },
        "title": "IndexAnalysisResult",
        "type": "object"
      },
      "annotations": {
        "title": "Analyze Query Indexes",
        "readOnlyHint": true
      }
    },
    {
      "name": "analyze_db_health",
      "description": "Analyzes database health. Here are the available health checks:\n- index - checks for invalid, duplicate, and bloated indexes\n- connection - checks the number of connection and their utilization\n- vacuum - checks vacuum health for transaction id wraparound\n- sequence - checks sequences at risk of exceeding their maximum value\n- replication - checks replication health including lag and slots\n- buffer - checks for buffer cache hit rates for indexes and tables\n- constraint - checks for invalid constraints\n- all - runs all checks\nYou can optionally specify a single health check or a comma-separated list of health checks. The default is 'all' checks.",
      "inputSchema": {
        "properties": {
          "health_type": {
            "default": "all",
            "description": "Optional. Valid values are: all, buffer, connection, constraint, index, replication, sequence, vacuum.",
            "title": "Health Type",
            "type": "string"
          }
        },
        "title": "analyze_db_healthArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "result": {
            "title": "Result",
            "type": "string"
          }
        },
        "required": [
          "result"
        ],
        "title": "analyze_db_healthOutput",
        "type": "object"
      },
      "annotations": {
        "title": "Analyze Database Health",
        "readOnlyHint": true
      }
    },
    {
      "name": "get_top_queries",
      "description": "Reports the slowest or most resource-intensive queries using data from the 'pg_stat_statements' extension.",
      "inputSchema": {
        "properties": {
          "sort_by": {
            "default": "resources",
            "description": "Ranking criteria: 'total_time' for total execution time or 'mean_time' for mean execution time per call, or 'resources' for resource-intensive queries",
            "title": "Sort By",
            "type": "string"
          },
          "limit": {
            "default": 10,
            "description": "Number of queries to return when ranking based on mean_time or total_time",
            "title": "Limit",
            "type": "integer"
          }
        },
        "title": "get_top_queriesArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "queries": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Queries",
            "type": "array"
          },
          "sort_by": {
            "title": "Sort By",
            "type": "string"
          },
          "count": {
            "title": "Count",
            "type": "integer"
          }
        },
        "required": [
          "queries",
          "sort_by",
          "count"
        ],
        "title": "TopQueriesResult",
        "type": "object"
      },
      "annotations": {
        "title": "Get Top Queries",
        "readOnlyHint": true
      }
    },
    {
      "name": "execute_sql",
      "description": "Execute any SQL query",
      "inputSchema": {
        "properties": {
          "sql": {
            "default": "all",
            "description": "SQL to run",
            "title": "Sql",
            "type": "string"
          }
        },
        "title": "execute_sqlArguments",
        "type": "object"
      },
      "outputSchema": {
        "properties": {
          "rows": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Rows",
            "type": "array"
          },
          "row_count": {
            "title": "Row Count",
            "type": "integer"
          }
        },
        "required": [
          "rows",
          "row_count"
        ],
        "title": "ExecuteSqlResult",
        "type": "object"
      },
      "annotations": {
        "title": "Execute SQL",
        "destructiveHint": true
      }
    }
  ]
}
